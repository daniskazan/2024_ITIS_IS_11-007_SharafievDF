Dev-ed.ru Blog http://dev-ed.ru Последние публикации из блога en-us Sun, 11 Feb 2024 08:59:55 +0000 Как сгенерировать рандомные цвета RGB\HEX в JS? http://dev-ed.ru/blog/js-generate-random-colors/ <h3>Выбор случайного цвета из набора</h3> <script src="https://gist.github.com/m5wdev/671594614ebea3717b0e3be37501ac27.js"></script> <h3>Генерируем случайный цвет в формате RGB</h3> <script src="https://gist.github.com/m5wdev/46bd4efe93084c6dcb984761eee0b728.js"></script> <h3>Генерируем случайный цвет в формате HEX</h3> <script src="https://gist.github.com/m5wdev/0739be7bae791249a3a175733bdf5107.js"></script> http://dev-ed.ru/blog/js-generate-random-colors/ Ошибка при установке пакетов с помощью yarn install http://dev-ed.ru/blog/yarn-install-error/ <p>При попытке установить пакеты с помощью <code>yarn install</code> возникает ошибка вида:</p> <pre> yarn install YN0000: · Yarn 4.1.0 YN0000: ┌ Resolution step YN0085: │ + @vueuse/core@npm:10.7.2, @vueuse/nuxt@npm:10.7.2, bootstrap@npm:5.3.2, nuxt@npm:3.10.0, sass@npm:1.70.0, … http://dev-ed.ru/blog/yarn-install-error/ Зачем использовать yarn когда есть npm? http://dev-ed.ru/blog/why-yarn/ <p>Npm не всегда работает без сбоев, при установке пакетов могут возникать ошибки, кроме того он качает пакеты по очереди.</p> <p>Yarn практически лишен недостатков npm, работает существенно быстрее и качает пакеты … http://dev-ed.ru/blog/why-yarn/ Резервное копирование и установка расширений (extensions) в Visual Studio Code http://dev-ed.ru/blog/vs-code-backup-restore-extensions/ <p>Несколько полезных команд для работы с расширениями в Microsoft Visual Studio Code.</p> <p>Сохранить все установленные расширения в файл (Win\Linux):</p> <pre> code --list-extensions > vscode-extensions.txt </pre> <p>Установить расширения из файла в … http://dev-ed.ru/blog/vs-code-backup-restore-extensions/ Как предотвратить билд образа Docker из кэша? http://dev-ed.ru/blog/prevent-docker-build-from-cache/ <p>При билде образа Docker создает кэши что не всегда бывает удобно и занимает много места на сервере. Для экономии места и создания чистого билда можно перед <code>sudo docker-compose up -d … http://dev-ed.ru/blog/prevent-docker-build-from-cache/ Ошибка Docker-compose ERROR [internal] booting buildkit при билде http://dev-ed.ru/blog/dcoker-buildkit-error/ <p>Желательно что бы Docker был установлен через <a href="https://snapcraft.io/docs/installing-snap-on-ubuntu">snap</a>. Для решения проблемы попробуйте обновить snap Docker до последней версии: </p> <pre> sudo snap refresh docker --channel=latest/edge </pre> http://dev-ed.ru/blog/dcoker-buildkit-error/ Как выбрать текущего пользователя в поле ForeignKey в админке Django по-умолчанию http://dev-ed.ru/blog/django-admin-foreign-key-initial-user/ <p>Предположим у вас есть модель которая ассоциируется с каким-то пользователем через поле ForeignKey. По-умолчанию в списке надо выбирать пользователя вручную, что неудобно.</p> <p>Чтобы текущий аутентифицированный пользователь был выбран в поле … http://dev-ed.ru/blog/django-admin-foreign-key-initial-user/ Зачем нужен Makefile? http://dev-ed.ru/blog/what-is-it-for-makefile/ <p>Makefile &ndash; это очень удобная штука, которая облегчит вам жизнь.</p> <p>Предположим у вас есть проект и для его деплоя\билда фронта\тестирования ... требуется набирать в терминале много команд:</p> <pre> cp -n … http://dev-ed.ru/blog/what-is-it-for-makefile/ Проблема при билде Docker: ERROR [internal] booting buildkit http://dev-ed.ru/blog/docker-issue-error-booting-buildkit/ <p>При попытке билда образа Docker возникает ошибка подобного вида:</p> <pre> docker-compose up -d [+] Building 26.1s (1/1) FINISHED => ERROR [internal] booting buildkit 26.1s => => pulling image moby/buildkit:buildx-stable-1 9.7s … http://dev-ed.ru/blog/docker-issue-error-booting-buildkit/ Проблемы с watch во Vue 3 когда в ref используется объект http://dev-ed.ru/blog/vue3-watch-issues/ <p>Предположим у вас есть объект ref вида:</p> <pre> const note = ref({ title: '', content: '', }) </pre> <p>Вы пытаетесь установить на него watcher:</p> <pre> watch(note, (newVal, oldVal) => { … http://dev-ed.ru/blog/vue3-watch-issues/ Как выгрузить\восстановить базу данных PostgreSQL из Docker-контейнера http://dev-ed.ru/blog/docker-dump-restore-postgresql/ <h3>Выгрузить SQL дамп базы</h3> <pre> docker exec -i pg_container_name /bin/bash -c "PGPASSWORD=pg_password pg_dump --username pg_username database_name" > /desired/path/on/your/machine/dump.sql </pre> <h3>Восстановить базу из SQL дампа</h3> <pre> docker exec -i pg_container_name /bin/bash … http://dev-ed.ru/blog/docker-dump-restore-postgresql/ Как посмотреть изменения между ветками (branches) на GitHub? http://dev-ed.ru/blog/github-see-differences/ <p>Для того чтобы увидеть изменения между ветками на GitHub добавьте <code>/compare</code> к ulr вашего репозитория:</p> <pre> https://github.com/&lt;YOUR_USERNAME>/&lt;YOUR_REPOSITORY><strong>/compare</strong> </pre> <p>Далее выберите ветки (branches) которые вы хотите сравнить.</p> http://dev-ed.ru/blog/github-see-differences/ Как быстро сгенерировать безопасный SECRET_KEY? http://dev-ed.ru/blog/generate-secure-secret-key/ <p>В терминале:</p> <pre> openssl rand -hex 32 </pre> <p>или с помощью Python:</p> <pre> import secrets print(secrets.token_hex(32)) </pre> http://dev-ed.ru/blog/generate-secure-secret-key/ Как создать Django app в определенной папке http://dev-ed.ru/blog/create-django-app-in-certain-dir/ <p>Предположим структура вашего проекта выглядит следующим образом:</p> <pre> apps/ config/ db.sqlite3 manage.py* media/ requirements.txt </pre> <p>И вы хотите создавать ваши applications в папке apps. Команда <code>python manage.py startapp your_app_name</code> создаст … http://dev-ed.ru/blog/create-django-app-in-certain-dir/ 101 вопрос (с ответами) на которые должен ответить Python-разработчик http://dev-ed.ru/blog/101-python3-qa/ <div class="mb-3"> <div class="h4"> <a href="/blog/101-python3-qa/#1">1. Что такое Python?</a> </div> </div> <div class="mb-3"> <div class="h4"> <a href="/blog/101-python3-qa/#2">2. В каком году написана первая статья про Python?</a> </div> </div> <div class="mb-3"> <div … http://dev-ed.ru/blog/101-python3-qa/ Проблемы с file-loader в Webpack 5 http://dev-ed.ru/blog/file-loader-issues-webpack5/ <p>file-loader не работает в Webpack 5, замените его на:</p> <pre> { test: /\.(gif|png|jpe?g|svg)$/i, type: 'asset/resource', ... } </pre> http://dev-ed.ru/blog/file-loader-issues-webpack5/ После обновления >= psycopg 3.1.8 в Django до 4.2.* появляется 502 ошибка http://dev-ed.ru/blog/after-update-psycopg-3-in-django-4-502-error/ <p>Скорее всего вы не установили всех зависимостей <a href="https://pypi.org/project/psycopg/">psycopg</a>:</p> <pre> pip install "psycopg[binary,pool]" </pre> http://dev-ed.ru/blog/after-update-psycopg-3-in-django-4-502-error/ При билде Docker-контейнера выдает: WARNING: Running pip as the 'root' user http://dev-ed.ru/blog/docker-warning-pip-as-root-user/ <p>Самый простой способ избавиться от warning'a - это добавить в <strong>Dockerfile</strong> строку:</p> <pre> ENV PIP_ROOT_USER_ACTION=ignore </pre> <p>Если такой вариант не нравится, то можно <a href="https://geeksforgeeks.org/docker-user-instruction/" target="_blank">создать пользователя внутри контейнера</a> и … http://dev-ed.ru/blog/docker-warning-pip-as-root-user/ Не получается установить Pygame в Windows 10 http://dev-ed.ru/blog/cant-install-pygame-win10/ <p>При попытке установить <code>pip install pygame</code> Pygame в Windows 10 возникает ошибка.</p> <p>Для решения проблемы установите <a href="https://github.com/pygame/pygame/releases" target="_blank">dev</a> версию:</p> <pre> pip install pygame==2.1.3.dev8 </pre> http://dev-ed.ru/blog/cant-install-pygame-win10/ Django template индексы в цикле http://dev-ed.ru/blog/django-template-for-indexes/ <p>Для вывода индексов объектов в цикле шаблона Django используется следующий синтаксис:</p> <pre> {% for object in objects_list %} {{ forloop.counter0 }} # начальный индекс 0 {{ forloop.counter }} # начальный … http://dev-ed.ru/blog/django-template-for-indexes/ Django template первый\последний объекты цикла http://dev-ed.ru/blog/django-template-for-first-last/ <p>Для выбора первого или последнего объектов в цикле for шаблонизатора Django используется следующий синтаксис:</p> <pre> {% for object in objects_list %} {% if forloop.first %} ... {% endif %} ... … http://dev-ed.ru/blog/django-template-for-first-last/ Django\Nginx 403 Forbidden Error при доступе к media http://dev-ed.ru/blog/django-nginx-403-media/ <p>Скорее всего ошибка возникает из-за неверных прав доступа к папке media и её поддиректориям. Исправляется командой:</p> <pre> sudo chmod 755 media/ -R </pre> http://dev-ed.ru/blog/django-nginx-403-media/ Ошибка 403 CSRF Protection при входе в админку Django 4.* http://dev-ed.ru/blog/403-error-django-admin/ <p>При попытке входа в админку Django 4.* возникает 403-я ошибка CSRF Protection.</p> <p>Согласно списку изменений <a href="https://docs.djangoproject.com/en/4.0/releases/4.0/#csrf-trusted-origins-changes-4-0">CSRF_TRUSTED_ORIGINS changes</a> в Django 4.*, вы должны добавить настройку <a href="https://docs.djangoproject.com/en/4.0/ref/settings/#csrf-trusted-origins">CSRF_TRUSTED_ORIGINS</a> в <strong>settings.py</strong> с … http://dev-ed.ru/blog/403-error-django-admin/ Ошибка при остановке Docker контейнера вида: ERROR: for *** cannot stop container: *** permission denied http://dev-ed.ru/blog/docker-error-cannot-stop-container-permission-denied/ <p>Ошибка возникает при запуске и остановке контейнера, а также при попытке его повторной сборки. Имеет примерно такой вид:</p> <p><code>ERROR: for db cannot stop container: 6d176af128a36b4d5f764b705685d5cfd49ec5a12a42ec7b331934eca9909548: permission denied</code></p> <p>Избавиться довольно просто:</p> … http://dev-ed.ru/blog/docker-error-cannot-stop-container-permission-denied/ Сохранить credentials GitHub на сервере http://dev-ed.ru/blog/git-credentials-store/ <p>Чтобы каждый раз при git pull не приходилось заново указывать ваш логин и пароль (access token) на GitHub перед любой манипуляцией в Git введите команду:</p> <pre> git config credential.helper store … http://dev-ed.ru/blog/git-credentials-store/ Как получить случайный объект из базы данных в Django? http://dev-ed.ru/blog/random-object-django/ <pre> YourModel.objects.order_by('?')[0] </pre> <p>или</p> <pre> YourModel.objects.order_by('?').first() </pre> http://dev-ed.ru/blog/random-object-django/ Что такое магические числа? http://dev-ed.ru/blog/magic-numbers-issue/ <p>Это числа происхождение которых непонятно другим программистам и вам спустя некоторое время. Например:</p> <pre> const euros = 1400 const dollars = 599 const count_euros = euros * 71.5 // 71.5 … http://dev-ed.ru/blog/magic-numbers-issue/ Как переопределить вывод --------- в админке Django? http://dev-ed.ru/blog/override-dashes-in-djnago-admin/ <p>Добавьте в admin.py следующие строки:</p> <p>Пустые поля в CharField, TextField etc</p> <pre> @admin.register(YourModel) class YourModelAdmin(admin.ModelAdmin): ... empty_value_display = '- пусто -' </pre> <p>Пустые поля в выпадающем списке Actions:</p> <pre> @admin.register(YourModel) … http://dev-ed.ru/blog/override-dashes-in-djnago-admin/ Установка Docker + Docker Compose на Ubuntu\Ubuntu Server http://dev-ed.ru/blog/install-docker-on-ubuntu/ <p>Самый простой и быстрый способ установить Docker & Docker Compose локально или на сервер - использовать <a href="https://snapcraft.io/">snaps</a>.</p> <pre>sudo apt install snapd</pre> <pre>sudo snap install docker</pre> <p>Вот так всё просто … http://dev-ed.ru/blog/install-docker-on-ubuntu/ Настройка отправки email в Django для Gmail, Mail.ru и Яндекс почты http://dev-ed.ru/blog/django-email-gmail-mailru-yandex/ <p>Прежде всего добавьте в settings.py вашего проекта:</p> <pre> # EMAIL_BACKEND = 'django.core.mail.backends.console.EmailBackend' EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend' </pre> <p>В случае если вы хотите использовать отправку почты в тестовом режиме (в консоли), раскомментируйте … http://dev-ed.ru/blog/django-email-gmail-mailru-yandex/ Как сгенерировать SECRET_KEY в Django? http://dev-ed.ru/blog/how-to-generate-secret-key-in-django/ <p>Заходим в терминал:</p> <pre>python manage.py shell</pre> <p>Импортируем utils:</p> <pre>from django.core.management import utils</pre> <p>Генерируем:</p> <pre>utils.get_random_secret_key()</pre> http://dev-ed.ru/blog/how-to-generate-secret-key-in-django/ Как создать virtualenv с разными версиями Python в Windows http://dev-ed.ru/blog/venv-python-defferent-versions/ <p>Прежде всего у вас должны быть установлены разные версии Python в системе + <a href="https://pypi.org/project/virtualenv/">virtualenv</a>.</p> <p>Ниже пример создания виртуальной среды для разных версий Python установленных в C:\</p> <pre> virtualenv venv … http://dev-ed.ru/blog/venv-python-defferent-versions/ Чистим Ubuntu Server от мусора http://dev-ed.ru/blog/clean-ubuntu-server/ <p>Проверено на Ubuntu Server 20.04</p> <div class="h4">Чистим ненужные пакеты</div> <pre> sudo apt-get --purge autoremove sudo apt autoclean -y sudo apt autoremove -y </pre> <div class="h4">Чистим логи</div> <pre> # место на … http://dev-ed.ru/blog/clean-ubuntu-server/ Выбор последнего элемента в цикле v-for во Vue.js http://dev-ed.ru/blog/vue-last-element-in-v-for/ <p>1. Выбор всех элементов кроме последнего в цикле v-for</p> <p>2. Выбор только последнего в цикле v-for</p> <script src="https://gist.github.com/m5wdev/5b2718d74eb9a55df5628230eac6eaef.js"></script> http://dev-ed.ru/blog/vue-last-element-in-v-for/ Применяем разные сериализаторы для разных действий в Django Rest Framework GenericViewSet http://dev-ed.ru/blog/drf-different-serializers-for-actions/ <p>Фактически нам нужно переопределить метод get_serializer_class() и с помощью условий добавить разные сериализаторы для actions:</p> <script src="https://gist.github.com/m5wdev/efe34aab3dcc868512f6d79b3e711c1a.js"></script> http://dev-ed.ru/blog/drf-different-serializers-for-actions/ JavaScript fetch с простой HTTP аутентификацией http://dev-ed.ru/blog/js-fetch-with-basic-http-auth/ <p>Самый простой способ протестировать ваш API с базовой аутентификацией (логин, пароль).</p> <script src="https://gist.github.com/m5wdev/ad020d1b5e7ed73a5327e14f3b05a557.js"></script> <p>Аналогичным образом работает с токенами.</p> <pre> const bearer = "Bearer " + YOUR_ACCESS_TOKEN const auth = { … http://dev-ed.ru/blog/js-fetch-with-basic-http-auth/ Как создать проект на Django в текущей папке http://dev-ed.ru/blog/create-django-project-in-current-folder/ <pre> cd /PROJECT_NAME django-admin startproject PROJECT_NAME . </pre> http://dev-ed.ru/blog/create-django-project-in-current-folder/ Посмотреть все пакеты node.js http://dev-ed.ru/blog/nodejs-list-paskages/ <p>Все пакеты с зависимостями</p> <pre>npm ls</pre> <p>Все пакеты верхнего уровня</p> <pre>npm ls -depth=0</pre> http://dev-ed.ru/blog/nodejs-list-paskages/ Разница между операторами "is" и "==" в Python http://dev-ed.ru/blog/python-operators-is-eq-difference/ <p>Оба оператора <code>is</code> и <code>==</code> предназначены для сравнения объектов в Python.</p> <p>Оператор <strong>==</strong> сравнивает два значения.</p> <p>Оператор <strong>is</strong> проверяет являются ли два объекта одинаковыми или является ли один объект ссылкой … http://dev-ed.ru/blog/python-operators-is-eq-difference/ Docker контейнер бесконечно перезагружается (Docker Container keeps on restarting again and again) http://dev-ed.ru/blog/docker-container-restarting-loop/ <p><strong>Проблема:</strong> После билда Docker контейнер работает некоторое время и после уходит в бесконечную перезагрузку.</p> <p><strong>Решение:</strong><br> Такая ситуация происходит из-за того что в контейнере нет активных задач и его работа останавливается, … http://dev-ed.ru/blog/docker-container-restarting-loop/ Как запустить, перезапустить, остановить, узнать статус Nginx в Ubuntu? http://dev-ed.ru/blog/nginx-start-restart-stop-status-ubuntu/ <p><strong>Systemctl</strong>: start\restart\stop\status</p> <pre> sudo systemctl restart nginx sudo systemctl start nginx sudo systemctl stop nginx sudo systemctl status nginx </pre> <p><strong>Service</strong>: start\restart\stop\status</p> <pre> sudo service nginx restart sudo service nginx … http://dev-ed.ru/blog/nginx-start-restart-stop-status-ubuntu/ Как обновить npm в Ubuntu? http://dev-ed.ru/blog/update-npm-ubuntu/ <pre>sudo npm update npm -g</pre> <p>или</p> <pre>sudo npm install npm -g</pre> http://dev-ed.ru/blog/update-npm-ubuntu/ Кастомная 404 страница в Django 3.xx http://dev-ed.ru/blog/django-3x-custom-404-page/ <p>Большинство туториалов в сети по запросу <em>"how to create custom 404 page in Django"</em> некорректны, т.к. мало где указывают что помимо переопределения шаблона для 404 ошибки надо еще возвращать корректный … http://dev-ed.ru/blog/django-3x-custom-404-page/ В чем разница между HTTP методами POST vs PUT vs PATCH? http://dev-ed.ru/blog/http-post-put-patch/ <p>Прежде всего внимательно ознакомьтесь с определением каждого HTTP метода в статье <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods" target="_blank">HTTP request methods</a>.</p> <p>Теперь кратко своими словами о каждом методе:</p> <h4>POST</h4> <p><strong>Create</strong></p> <p>Предназначен для создания новой сущности. … http://dev-ed.ru/blog/http-post-put-patch/ Шифр Цезаря на Python http://dev-ed.ru/blog/caesar-cipher-python/ <script src="https://gist.github.com/m5wdev/48f51fece45b86d69d9e2f9fe6de2c18.js"></script> <p>Более подробное описание в статье <a href="https://blog.cyberhacktics.com/build-a-caesar-cipher-in-python/" target="_blank">Build a Caesar Cipher in Python</a></p> http://dev-ed.ru/blog/caesar-cipher-python/ В чем разница между Aggregation и Annotation в Django http://dev-ed.ru/blog/django-aggregation-annotation/ <p><strong>Aggregation</strong> - обрабатывает все результаты запроса (queryset).</p> <p>Предположим мы хотим получить среднюю цену всех товаров в магазине:</p> <pre> Product.objects.aggregate(avg_price=Avg('price')) # {'avg_price': 1596.75} </pre> <p><strong>Annotation</strong> - обрабатывает значение каждого значения (item) … http://dev-ed.ru/blog/django-aggregation-annotation/ Что такое сериализация (serialization) в Django? http://dev-ed.ru/blog/django-serialization/ <p><strong>Сериализация</strong> &ndash; это механизм перевода моделей Django в другие форматы, обычно текстовые (XML, JSON...).<br /> Более подробно о сериализации читайте в документации <a href="https://docs.djangoproject.com/en/dev/topics/serialization/" target="_blank">Serializing Django objects</a>.</p> http://dev-ed.ru/blog/django-serialization/ Выводим Inline формы в админке Django в зависимости от группы в которой находится пользователь http://dev-ed.ru/blog/django-admin-inlines-user-group/ <p>Начиная с версии Django 3.* доступен метод <a href="https://docs.djangoproject.com/en/3.0/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_inlines" target="_blank">get_inlines</a>.</p> <p>Допустим мы хотим показать Inline форму если пользователь находится в определенной группе.</p> <pre> admin.py class YourInline(admin.TabularInline): model = YourAnotherModel extra … http://dev-ed.ru/blog/django-admin-inlines-user-group/ Проверить принадлежность пользователя к группе в Django http://dev-ed.ru/blog/django-check-user-in-group/ <p>Принадлежит к одной группе:</p> <pre><объект_пользователя>.groups.filter(name='Имя_группы').exists()</pre> <p>Принадлежит к группам:</p> <pre><объект_пользователя>.groups.filter(name__in=['Имя_группы_1', 'Имя_группы_2']).exists()</pre> http://dev-ed.ru/blog/django-check-user-in-group/ Python List Deep Flattening http://dev-ed.ru/blog/python-list-deep-flattening/ <div class="h4">Задача</div> <p>Привести список (list) вида: <code>[1, 2, 2, [27, 4, [5, 1]]]</code> к <code>[1, 2, 2, 27, 4, 5, 1]</code></p> <hr /> <div class="h4">Решение #1 с помощью iteration-utilities</div> <p>Самый … http://dev-ed.ru/blog/python-list-deep-flattening/ Django не отображает статических файлов в режиме DEBUG=False http://dev-ed.ru/blog/django-runserver-insecure/ <p>Для решения проблемы используйте <a href="https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#runserver" target="_blank">--insecure</a></p> <pre>python manage.py runserver --insecure</pre> <p>или</p> <pre>django-admin runserver --nostatic</pre> <p>Обратите внимание, что не стоит использовать опцию --insecure в Prod. режиме т.к. это крайне неэффективно … http://dev-ed.ru/blog/django-runserver-insecure/ Как обновить все пакеты в node.js? http://dev-ed.ru/blog/update-node-packages/ <p>Установите npm-check-updates:</p> <pre> npm i -g npm-check-updates </pre> <p>Далее будут доступны команды:</p> <pre> ncu -u npm install </pre> http://dev-ed.ru/blog/update-node-packages/ Как очистить Recent actions в админке Django http://dev-ed.ru/blog/clean-django-recent-actions/ <pre> from django.contrib.admin.models import LogEntry LogEntry.objects.all().delete() </pre> http://dev-ed.ru/blog/clean-django-recent-actions/